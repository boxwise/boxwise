language: node_js
node_js:
- '8'
cache: yarn
script:
- yarn build
- yarn test
# .env.production is kept out of the root directory, because if it were there
# running "firebase deploy" would create a clone of our real production
# environment. This is not something we can stop (they are public details) but
# we should at least stop people from doing it accidentally.
before_deploy:
- cp .travis/.env.production ./
deploy:
  provider: firebase
  project: boxwise-production
  skip_cleanup: true
  token:
    secure: aGi6OAlKy5691fdPjgMGrsX4n6yK5uOKQcpcZVkKU64nBdSZzbJzM+ODT4SDJtMuUezZomwP+7EkH2CQTC4SUnuDWwoD7xchIvRDG40YYv814BalGTSGReIc+8Oz2gyo7yFxHmm2WnU5zpQJrlecgjo7g8hNkr5o7JlY7TpDKEgY8AT7q9KmQZ+OeMwDFS0aw4EerRVLB5pFr0RN2sw/xTRPufChRQzOsMtYpHTGzF+6UlSYzJ5Xil6YxJ/QD1q1NE6U6eJvL0KGp337cHs6RyPrO2rPr/yoViJKNTo+T/5Qv8I5KnEroZEyCt8VFlzaAUlOkVb9qpshwaZM2HbvCbxEWQkyiUgCRl/DRgcyLewLk15tmKyEmakrHkip7aDM5yU6A7J0yGXtrY9ik/Ezx1nftL0i9LJS+Z+eOkefIJKfBmLLDxoFYY4qE9n8XEudLzwwG9lyYyqBQgAJU+F5PQxxMvA/ld/EaVcrEMpBmRNw79wCT+mhEuybuMBJNtikIVbhF61IRazx3cauw5ZqV7W4UUdFjM3vVJxZh1q+jytbKSQSnuYfZqX5IEGnvLMOSBMb7jIU/qaVDtkQh3uCXQhySIGBZ1eiZZRzNT2tEpl4Ad2frSA+Kpkg59jWF0aQz8ruUX4rKXqFjOVJXIlpQocpcnnqyj7UXuKWiDqcAvE=
notifications:
  slack:
    on_success: change
    on_failure: change
    rooms:
      secure: UsyAyS/TPGo5n4t7xaasx13IQkJPREUliDee4N5UaDaj1rZ9qUkRhcQaVuouSbM+8l5fN04l2aNeVJQeX9aODaQ2sGKeNdhtXknI+ivUrJonmsuXbnntU+/XYTBDUE57vz0CCIY2/HjXMnrz5NuXkb88r2bvzhtphACqeFrgqlZ0RxghKAdpUWadQhAm56C9ibNfOWSuC8HqCPhixJXpJlOmRoJ9ZcjOUy+8c6EEdxvMqH/Jv4dCqVQTYdJdo1ymME/1euN52/a2igS43sPug5KJh0Gnm1SrAvEPgBUH4gMWvaew8wt6WHPkTN2vcDphkz5KguH2DYZJ0reBItOSawAUlY8Md7CUlDQ+fWN77piZShKMye8NSWnGOK6lr7gWIYAeUt3dtxkszY5YFdPh8OfwAPeRmGLRsHg4TTeyVFuhG2vIpOapF2usVcpTzGZTKaz7VMS0yyVI5vt2NOj8p4tAJpXpVmQQw1MspLVI3nkgfw0XV/btjZxoMzIK0YoMWWTH42VVxVwiPz63+sUSiAU0XbDWY01G90w20Qtzj3ui6DiiwMrJ+Zf0Ym/ltv04IQjYxwyxuHoVY4AYA8zLaMZf8+gkcWkvKqBSfs062CMxTXFnyrid3D9jbZXOqrZ5+Dsz0lUF9AP4sQ6XEQ+OtWFiQYpzp34jzadPYLYPJco=
